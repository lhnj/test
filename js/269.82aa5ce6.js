"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[269],{8269:function(e,t,l){l.r(t),l.d(t,{default:function(){return c}});var a=function(){var e=this,t=e._self._c;return t("div",[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),t("el-breadcrumb-item",{attrs:{to:{path:"/Br"}}},[e._v("患者管理")]),t("el-breadcrumb-item",[e._v("病历")])],1),t("el-page-header",{staticStyle:{"margin-top":"20px"},attrs:{content:"病历"},on:{back:function(t){return e.$router.back()}}}),t("div",[t("el-descriptions",{staticClass:"margin-top",staticStyle:{width:"70%","margin-top":"20px"},attrs:{column:3,border:""}},[t("el-descriptions-item",[t("template",{slot:"label"},[t("i",{staticClass:"el-icon-user"}),e._v(" 姓名 ")]),e._v(" "+e._s(this.brInfo.name)+" ")],2),t("el-descriptions-item",[t("template",{slot:"label"},[t("i",{staticClass:"el-icon-tickets"}),e._v(" 性别 ")]),t("el-tag",{attrs:{size:"small"}},[e._v(e._s(this.brInfo.sex))])],2),t("el-descriptions-item",[t("template",{slot:"label"},[t("i",{staticClass:"el-icon-tickets"}),e._v(" 年龄 ")]),e._v(" "+e._s(this.brInfo.age)+" ")],2),t("el-descriptions-item",[t("template",{slot:"label"},[t("i",{staticClass:"el-icon-mobile-phone"}),e._v(" 手机号 ")]),e._v(" "+e._s(this.brInfo.tel)+" ")],2),t("el-descriptions-item",[t("template",{slot:"label"},[t("i",{staticClass:"el-icon-location-outline"}),e._v(" 地址 ")]),e._v(" "+e._s(this.brInfo.address)+" ")],2),t("el-descriptions-item",[t("template",{slot:"label"},[t("i",{staticClass:"el-icon-office-building"}),e._v(" 来源 ")]),e._v(" "+e._s(this.brInfo.bfrom)+" ")],2)],1)],1),t("div",{staticStyle:{"margin-bottom":"20px","margin-top":"20px"}},[t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right",clearable:!1},on:{change:function(t){return e.getBE()}},model:{value:e.btime,callback:function(t){e.btime=t},expression:"btime"}}),t("el-select",{staticStyle:{"margin-left":"10px"},attrs:{placeholder:"请选择就诊类型"},model:{value:e.params.btype,callback:function(t){e.$set(e.params,"btype",t)},expression:"params.btype"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:function(t){return e.findBl()}}},[e._v("查询所有")]),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){return e.searchWf()}}},[e._v("查询未付")]),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger"},on:{click:function(t){return e.clearSearch()}}},[e._v("清空")]),t("el-button",{staticStyle:{"margin-left":"80px"},attrs:{type:"primary"},on:{click:function(t){return e.addBl()}}},[e._v("添加")])],1),t("div",[t("el-table",{staticStyle:{width:"70%"},attrs:{data:e.tableData,stripe:"",border:"",size:"mini"}},[t("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left"}},[t("el-form-item",{attrs:{label:"时间"}},[t("span",[e._v(e._s(l.row.btime))])]),t("el-form-item",{attrs:{label:"就诊类型"}},[t("span",[e._v(e._s(l.row.btype))])]),t("el-form-item",{attrs:{label:"病情"}},[t("span",[e._v(e._s(l.row.bdetail))])]),t("el-form-item",{attrs:{label:"费用"}},[t("span",[e._v(e._s(l.row.fy))])]),t("el-form-item",{attrs:{label:"未付"},scopedSlots:e._u([{key:"default",fn:function(a){return[l.row.wf>0?t("el-tag",{attrs:{type:"danger"}},[e._v(e._s(l.row.wf))]):t("el-tag",{attrs:{type:"success"}},[e._v(e._s(l.row.wf))])]}}],null,!0)})],1)]}}])}),t("el-table-column",{attrs:{align:"center","label-align":"center","show-overflow-tooltip":!0,prop:"btime",label:"时间"}}),t("el-table-column",{attrs:{align:"center","label-align":"center","show-overflow-tooltip":!0,prop:"btype",label:"就诊类型"}}),t("el-table-column",{attrs:{align:"center","label-align":"center","show-overflow-tooltip":!0,prop:"bdetail",label:"病情"}}),t("el-table-column",{attrs:{align:"center","label-align":"center","show-overflow-tooltip":!0,prop:"fy",label:"费用"}}),t("el-table-column",{attrs:{align:"center","label-align":"center","show-overflow-tooltip":!0,prop:"wf",label:"未付"},scopedSlots:e._u([{key:"default",fn:function(l){return[l.row.wf>0?t("el-tag",{attrs:{type:"danger"}},[e._v(e._s(l.row.wf))]):t("el-tag",{attrs:{type:"success"}},[e._v(e._s(l.row.wf))])]}}])}),t("el-table-column",{attrs:{align:"center","label-align":"center",fixed:"right",width:"200",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editBl(l.row)}}},[e._v("编辑")]),t("el-popconfirm",{attrs:{title:"确定删除吗？"},on:{confirm:function(t){return e.delBl(l.row.id)}}},[t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",type:"danger"},slot:"reference"},[e._v("删除")])],1)]}}])})],1)],1),t("div",[t("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{"current-page":e.params.pageNum,"page-sizes":[5,10,50,100],"page-size":e.params.pageSize,layout:"total, sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("div",[t("el-dialog",{attrs:{title:"请填写信息",visible:e.dialogFormVisible,width:"30%","before-close":e.CancelDialog},on:{"update:visible":function(t){e.dialogFormVisible=t},open:function(t){e.more++}}},[t("el-form",{key:e.more,ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"时间","label-width":"15%",prop:"btime"}},[t("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:e.form.btime,callback:function(t){e.$set(e.form,"btime",t)},expression:"form.btime"}})],1),t("el-form-item",{attrs:{label:"类型","label-width":"15%",prop:"btype"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.btype,callback:function(t){e.$set(e.form,"btype",t)},expression:"form.btype"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"病情","label-width":"15%",prop:"bdetail"}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:2},placeholder:"请输入内容"},model:{value:e.form.bdetail,callback:function(t){e.$set(e.form,"bdetail",t)},expression:"form.bdetail"}})],1),t("el-form-item",{attrs:{label:"费用","label-width":"15%",prop:"fy"}},[t("el-input",{staticStyle:{width:"70%"},attrs:{autocomplete:"off",type:"number"},model:{value:e.form.fy,callback:function(t){e.$set(e.form,"fy",t)},expression:"form.fy"}})],1),t("el-form-item",{attrs:{label:"未付","label-width":"15%",prop:"wf"}},[t("el-input",{staticStyle:{width:"70%"},attrs:{autocomplete:"off",type:"number"},model:{value:e.form.wf,callback:function(t){e.$set(e.form,"wf",t)},expression:"form.wf"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.CancelDialog}},[e._v("取 消")]),t("el-button",{attrs:{type:"success"},on:{click:e.resetRef}},[e._v("重置")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitBl()}}},[e._v("确 定")])],1)],1)],1)],1)},i=[],s=(l(560),l(4471)),r={name:"BlView",props:["bid"],data(){return{brInfo:{},pickerOptions:{shortcuts:[{text:"最近一周",onClick(e){const t=new Date,l=new Date;l.setTime(l.getTime()-6048e5),e.$emit("pick",[l,t])}},{text:"最近一个月",onClick(e){const t=new Date,l=new Date;l.setTime(l.getTime()-2592e6),e.$emit("pick",[l,t])}},{text:"最近三个月",onClick(e){const t=new Date,l=new Date;l.setTime(l.getTime()-7776e6),e.$emit("pick",[l,t])}}]},btime:"",params:{brid:this.bid,sbtime:"",ebtime:"",btype:"",wf:"",pageNum:1,pageSize:5},total:0,tableData:[],dialogFormVisible:!1,form:{},rules:{btime:[{required:!0,message:"请选择时间",trigger:blur}],btype:[{required:!0,message:"请选择就诊类型",trigger:blur}],bdetail:[],fy:[{required:!0,message:"请输入费用",trigger:blur}],wf:[{required:!0,message:"请输入未付费用",trigger:blur}]},more:0,options:[{value:"洗牙",label:"洗牙"},{value:"拔牙",label:"拔牙"},{value:"补牙",label:"补牙"},{value:"根管治疗",label:"根管治疗"},{value:"固定义齿修复",label:"固定义齿修复"},{value:"活动义齿修复",label:"活动义齿修复"},{value:"种植牙",label:"种植牙"},{value:"牙齿矫正",label:"牙齿矫正"}]}},created(){s.Z.get("/findBr/"+this.bid).then((e=>{0===e.state?this.brInfo=e.data:this.$message.error(e.message)})),this.findBl()},methods:{load(){s.Z.get("/findAllBl").then((e=>{0===e.state&&(this.tableData=e.data)}))},getBE(){""!==this.btime&&(this.params.sbtime=this.btime[0].toString(),this.params.ebtime=this.btime[1].toString())},findBl(){s.Z.get("/findBl",{params:this.params}).then((e=>{0===e.state?(this.tableData=e.data.list,this.total=e.data.total,this.$message({message:"查询成功",type:"success"})):(this.$message.error(e.message),this.$router.push("/login"))}))},searchWf(){this.params.wf="wf",this.findBl()},handleSizeChange(e){this.params.pageSize=e,this.findBl()},handleCurrentChange(e){this.params.pageNum=e,this.findBl()},clearSearch(){this.btime="",this.params={brid:this.bid,pageNum:1,pageSize:5,sbtime:"",ebtime:"",btype:"",wf:""},this.findBl()},addBl(){this.form={},this.dialogFormVisible=!0},editBl(e){this.form=e,this.dialogFormVisible=!0},submitBl(){this.$refs.form.validate((e=>{e&&s.Z.post("/saveBl/"+this.bid,this.form).then((e=>{0===e.state?(this.$message({message:"操作成功",type:"success"}),this.dialogFormVisible=!1,this.findBl()):this.$message.error(e.message)}))}))},delBl(e){s.Z.delete("/delBl/"+e).then((e=>{0===e.state?(this.$message({message:"删除成功",type:"success"}),this.findBl()):this.$message.error(e.message)}))},resetRef(){this.$refs.form.resetFields()},CancelDialog(){this.dialogFormVisible=!1,this.resetRef()},ts(){s.Z.get("/ts",{params:this.params}).then((e=>{console.log(e.data)}))}},watch:{btime:{handler(e){e||(this.btime="",this.params.sbtime="",this.params.ebtime="")}}}},o=r,n=l(1001),m=(0,n.Z)(o,a,i,!1,null,"8311d5d8",null),c=m.exports}}]);
//# sourceMappingURL=269.82aa5ce6.js.map