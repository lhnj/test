"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[825],{825:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var r=function(){var e=this,t=e._self._c;return t("div",[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),t("el-breadcrumb-item",[e._v("预约管理")])],1),t("div",{staticStyle:{"margin-bottom":"20px","margin-top":"20px"}},[t("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入姓名"},model:{value:e.params.name,callback:function(t){e.$set(e.params,"name",t)},expression:"params.name"}}),t("el-select",{staticStyle:{width:"150px","margin-left":"5px"},attrs:{placeholder:"请预约状态"},model:{value:e.params.ystate,callback:function(t){e.$set(e.params,"ystate",t)},expression:"params.ystate"}},[t("el-option",{attrs:{label:"未完成",value:"未完成"}}),t("el-option",{attrs:{label:"已完成",value:"已完成"}})],1),t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right",STYLE:"width: 380px;margin-left: 5px",clearable:!1},on:{change:function(t){return e.getBE()}},model:{value:e.ytime,callback:function(t){e.ytime=t},expression:"ytime"}}),t("el-select",{staticStyle:{width:"180px","margin-left":"5px"},attrs:{placeholder:"请选择就诊类型"},model:{value:e.params.ytype,callback:function(t){e.$set(e.params,"ytype",t)},expression:"params.ytype"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:function(t){return e.findYu()}}},[e._v("查询")]),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger"},on:{click:function(t){return e.clearSearch()}}},[e._v("清空")]),t("el-button",{staticStyle:{"margin-left":"100px"},attrs:{type:"primary"},on:{click:function(t){return e.addYu()}}},[e._v("添加")])],1),t("div",[t("el-table",{staticStyle:{width:"80%"},attrs:{data:e.tableData,stripe:"",border:"",size:"mini"}},[t("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left"}},[t("el-form-item",{attrs:{label:"姓名"}},[t("span",[e._v(e._s(a.row.name))])]),t("el-form-item",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(r){return["未完成"===a.row.ystate?t("el-tag",{attrs:{type:"danger"}},[e._v(e._s(a.row.ystate))]):t("el-tag",{attrs:{type:"success"}},[e._v(e._s(a.row.ystate))])]}}],null,!0)}),t("el-form-item",{attrs:{label:"时间"}},[t("span",[e._v(e._s(a.row.ytime))])]),t("el-form-item",{attrs:{label:"就诊类型"}},[t("span",[e._v(e._s(a.row.ytype))])]),t("el-form-item",{attrs:{label:"备注"}},[t("span",[e._v(e._s(a.row.yremark))])])],1)]}}])}),t("el-table-column",{attrs:{align:"center","label-align":"center","show-overflow-tooltip":!0,prop:"name",label:"姓名"}}),t("el-table-column",{attrs:{align:"center","label-align":"center","show-overflow-tooltip":!0,prop:"ystate",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(a){return["未完成"===a.row.ystate?t("el-tag",{attrs:{type:"danger"}},[e._v(e._s(a.row.ystate))]):t("el-tag",{attrs:{type:"success"}},[e._v(e._s(a.row.ystate))])]}}])}),t("el-table-column",{attrs:{align:"center","label-align":"center","show-overflow-tooltip":!0,prop:"ytime",label:"时间"}}),t("el-table-column",{attrs:{align:"center","label-align":"center","show-overflow-tooltip":!0,prop:"ytype",label:"就诊类型"}}),t("el-table-column",{attrs:{align:"center","label-align":"center","show-overflow-tooltip":!0,prop:"yremark",label:"备注"}}),t("el-table-column",{attrs:{align:"center","label-align":"center",fixed:"right",width:"200",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editYu(a.row)}}},[e._v("编辑")]),t("el-popconfirm",{attrs:{title:"确定删除吗？"},on:{confirm:function(t){return e.delYu(a.row.id)}}},[t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",type:"danger"},slot:"reference"},[e._v("删除")])],1)]}}])})],1)],1),t("div",[t("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{"current-page":e.params.pageNum,"page-sizes":[5,10,50,100],"page-size":e.params.pageSize,layout:"total, sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("div",[t("el-dialog",{attrs:{title:"请填写信息",visible:e.dialogFormVisible,width:"30%","before-close":e.CancelDialog},on:{"update:visible":function(t){e.dialogFormVisible=t},open:function(t){e.more++}}},[t("el-form",{key:e.more,ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"姓名","label-width":"15%",prop:"name"}},[e.brname?t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.chooseBr()}}},[e._v("搜索患者")]):e._e(),t("el-input",{staticStyle:{width:"70%"},attrs:{autocomplete:"off",disabled:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"状态","label-width":"15%",prop:"ystate"}},[t("el-radio-group",{model:{value:e.form.ystate,callback:function(t){e.$set(e.form,"ystate",t)},expression:"form.ystate"}},[t("el-radio",{attrs:{label:"未完成"}},[t("el-tag",{attrs:{type:"danger"}},[e._v("未完成")])],1),t("el-radio",{attrs:{label:"已完成"}},[t("el-tag",{attrs:{type:"success"}},[e._v("已完成")])],1)],1)],1),t("el-form-item",{attrs:{label:"时间","label-width":"15%",prop:"ytime"}},[t("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:e.form.ytime,callback:function(t){e.$set(e.form,"ytime",t)},expression:"form.ytime"}})],1),t("el-form-item",{attrs:{label:"类型","label-width":"15%",prop:"ytype"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.ytype,callback:function(t){e.$set(e.form,"ytype",t)},expression:"form.ytype"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"备注","label-width":"15%",prop:"yremark"}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:2},placeholder:"请输入内容"},model:{value:e.form.yremark,callback:function(t){e.$set(e.form,"yremark",t)},expression:"form.yremark"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.CancelDialog}},[e._v("取 消")]),t("el-button",{attrs:{type:"success"},on:{click:e.resetRef}},[e._v("重置")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitYu()}}},[e._v("确 定")])],1)],1)],1),t("div",[t("el-dialog",{attrs:{title:"选择患者|单击表格单行数据选中",visible:e.dialogTableVisible,"before-close":e.CancelTableDialog},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[t("div",[t("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入姓名"},model:{value:e.brparams.name,callback:function(t){e.$set(e.brparams,"name",t)},expression:"brparams.name"}}),t("el-input",{staticStyle:{width:"200px","margin-left":"5px"},attrs:{placeholder:"请输入电话"},model:{value:e.brparams.tel,callback:function(t){e.$set(e.brparams,"tel",t)},expression:"brparams.tel"}}),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:function(t){return e.findBr()}}},[e._v("查询")]),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger"},on:{click:function(t){return e.brclearSearch()}}},[e._v("清空")]),e.boolbr?t("div",{staticStyle:{"margin-top":"20px"}},[e._v(" 已选中 "),t("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.currentBr.name))]),t("el-button",{staticStyle:{"margin-left":"10px"},on:{click:function(t){return e.setCurrentBr()}}},[e._v("取消选择")])],1):e._e()],1),t("el-table",{ref:"brTable",staticStyle:{"margin-top":"20px"},attrs:{data:e.gridData,border:"","highlight-current-row":""},on:{"current-change":e.brChange}},[t("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left"}},[t("el-form-item",{attrs:{label:"姓名"}},[t("span",[e._v(e._s(a.row.name))])]),t("el-form-item",{attrs:{label:"性别"}},[t("span",[e._v(e._s(a.row.sex))])]),t("el-form-item",{attrs:{label:"年龄"}},[t("span",[e._v(e._s(a.row.age))])]),t("el-form-item",{attrs:{label:"电话"}},[t("span",[e._v(e._s(a.row.tel))])]),t("el-form-item",{attrs:{label:"来源"}},[t("span",[e._v(e._s(a.row.bfrom))])]),t("el-form-item",{attrs:{label:"地址"}},[t("span",[e._v(e._s(a.row.address))])])],1)]}}])}),t("el-table-column",{attrs:{align:"center","label-align":"center","show-overflow-tooltip":!0,prop:"name",width:"100",label:"姓名"}}),t("el-table-column",{attrs:{align:"center","label-align":"center","show-overflow-tooltip":!0,prop:"sex",width:"100",label:"性别"}}),t("el-table-column",{attrs:{align:"center","label-align":"center","show-overflow-tooltip":!0,prop:"age",width:"100",label:"年龄"}}),t("el-table-column",{attrs:{align:"center","label-align":"center","show-overflow-tooltip":!0,prop:"tel",width:"120",label:"电话"}}),t("el-table-column",{attrs:{align:"center","label-align":"center","show-overflow-tooltip":!0,prop:"bfrom",width:"100",label:"来源"}}),t("el-table-column",{attrs:{align:"center","label-align":"center","show-overflow-tooltip":!0,prop:"address",label:"地址"}})],1),t("div",[t("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{"current-page":e.brparams.pageNum,"page-sizes":[5,10,50,100],"page-size":e.brparams.pageSize,layout:"total, sizes, prev, pager, next",total:e.brtotal},on:{"size-change":e.brhandleSizeChange,"current-change":e.brhandleCurrentChange}})],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.CancelTableDialog}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitBr()}}},[e._v("确 定")])],1)],1)],1)],1)},l=[],s=(a(560),a(4471)),i={name:"YuView",data(){return{pickerOptions:{shortcuts:[{text:"最近一周",onClick(e){const t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick(e){const t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick(e){const t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},ytime:"",params:{name:"",stime:"",etime:"",ystate:"",pageNum:1,pageSize:5},total:0,tableData:[],dialogFormVisible:!1,form:{},rules:{name:[{required:!0,message:"请选择患者",trigger:blur}],ystate:[{required:!0,message:"请选择状态",trigger:blur}],ytime:[{required:!0,message:"请选择时间",trigger:blur}],ytype:[{required:!0,message:"请选择就诊类型",trigger:blur}],yremark:[]},more:0,brname:!1,options:[{value:"洗牙",label:"洗牙"},{value:"拔牙",label:"拔牙"},{value:"补牙",label:"补牙"},{value:"根管治疗",label:"根管治疗"},{value:"固定义齿修复",label:"固定义齿修复"},{value:"活动义齿修复",label:"活动义齿修复"},{value:"种植牙",label:"种植牙"},{value:"牙齿矫正",label:"牙齿矫正"}],dialogTableVisible:!1,gridData:[],brparams:{name:"",tel:"",pageNum:1,pageSize:5},brtotal:0,currentBr:{name:""},boolbr:!1}},created(){this.findYu()},methods:{getBE(){""!==this.ytime&&(this.params.stime=this.ytime[0].toString(),this.params.etime=this.ytime[1].toString())},findYu(){s.Z.get("/findYu",{params:this.params}).then((e=>{0===e.state?(this.tableData=e.data.list,this.total=e.data.total,this.$message({message:"查询成功",type:"success"})):(this.$message.error(e.message),this.$router.push("/login"))}))},handleSizeChange(e){this.params.pageSize=e,this.findYu()},handleCurrentChange(e){this.params.pageNum=e,this.findYu()},clearSearch(){this.ytime="",this.params={name:"",stime:"",etime:"",ystate:"",pageNum:1,pageSize:5},this.findYu()},addYu(){this.form={},this.brname=!0,this.dialogFormVisible=!0},editYu(e){this.form=e,this.brname=!1,this.dialogFormVisible=!0},submitYu(){this.$refs.form.validate((e=>{e&&s.Z.post("/saveYu",this.form).then((e=>{0===e.state?(this.$message({message:"操作成功",type:"success"}),this.dialogFormVisible=!1,this.findYu()):this.$message.error(e.message)}))}))},delYu(e){s.Z.delete("/delYu/"+e).then((e=>{0===e.state?(this.$message({message:"删除成功",type:"success"}),this.findYu()):this.$message.error(e.message)}))},resetRef(){this.$refs.form.resetFields()},CancelDialog(){this.dialogFormVisible=!1,this.resetRef()},chooseBr(){this.dialogFormVisible=!1,this.dialogTableVisible=!0,this.currentBr={name:""},this.findBr()},findBr(){s.Z.get("/findBr",{params:this.brparams}).then((e=>{0===e.state?(this.gridData=e.data.list,this.brtotal=e.data.total,this.$message({message:"查询成功",type:"success"}),0===this.gridData.length&&this.$alert("未搜索到，请添加此患者","提示",{confirmButtonText:"确定",callback:e=>{this.dialogFormVisible=!1,this.dialogTableVisible=!1,this.$router.push({path:"/Br"})}})):(this.$message.error(e.message),this.$router.push("/login"))})),""!==this.currentBr.name&&this.setCurrentBr()},brhandleSizeChange(e){this.params.pageSize=e,this.findBr()},brhandleCurrentChange(e){this.params.pageNum=e,this.findBr()},brclearSearch(){this.params={name:"",tel:"",pageNum:1,pageSize:5},this.findBr()},brChange(e){this.currentBr=e,this.boolbr=!0},setCurrentBr(e){this.$refs.brTable.setCurrentRow(e),this.boolbr=!1,this.currentBr={name:""}},CancelTableDialog(){this.brname=!0,this.dialogFormVisible=!0,this.dialogTableVisible=!1,this.setCurrentBr(),this.$message.error("未选择患者")},submitBr(){""===this.currentBr.name?this.CancelTableDialog():(this.form={},this.form.brid=this.currentBr.id,this.form.name=this.currentBr.name,this.$message({type:"success",message:"已选择患者"+this.currentBr.name}),this.brname=!0,this.dialogFormVisible=!0,this.dialogTableVisible=!1,this.setCurrentBr())}},watch:{ytime:{handler(e){e||(this.ytime="",this.params.stime="",this.params.etime="")}}}},o=i,n=a(1001),m=(0,n.Z)(o,r,l,!1,null,"42c17d79",null),c=m.exports}}]);
//# sourceMappingURL=825.85370a58.js.map